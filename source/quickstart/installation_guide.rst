.. _start_guide:

************
Installation
************

-------------
Prerequisites
-------------

.. topic:: ``Required``

   | MPI C++ compiler (support C++11 and MPI-3 standard features)
   | `GNU Libtool <https://www.gnu.org/software/libtool/>`_
   | `GNU Autoconf <https://www.gnu.org/software/autoconf/autoconf.html>`_ (Version 2.69 or newer)
   | `GNU AutoMake <https://www.gnu.org/software/automake/>`_
   | `Boost C++ Libraries <http://www.boost.org/>`_ (Version 1.53.0 or newer)
   | `BLAS <http://www.netlib.org/blas/>`_
   | `LAPACK <http://www.netlib.org/lapack/>`_
   | `ScaLAPACK <http://www.netlib.org/scalapack/scalapack_home.html>`_

.. topic:: ``**Strongly Recommended** for BLAS, LAPACK & ScaLAPACK``

   | `Intel MKL <https://software.intel.com/en-us/intel-mkl>`_ (Intel Math Kernel Library)

-----------
Build BAGEL
-----------

 * Automake

   1. glibtoolize (in Linux, "libtoolize" instead)
   #. aclocal
   #. autoconf
   #. autoheader
   #. automake -a
 
 * Create an object directory & Configure
   
   1. mkdir obj
   #. cd obj
   #. minimum configure: ``../configure '--enable-mkl' 'LDFLAGS=-L$(BOOST)/lib -L$(MKL)/lib' '--with-include=-I$(BOOST)/include -I(MKL)/include'``
   
    Configure Options
     * ``--with-mpi= `value```  turns on MPI. `value` can be mvapich, intel, openmpi. However, Open MPI is not recommended. 
     * ``--enable-mkl``  turns on MKL extensions, such as efficient matrix transposition. MKL libraries are automatically detected.
     * ``--disable-scalapack``  will disable use of ScaLapack (parallel Lapack) which is not recommended.
     * ``--disable-smith``  will disable the code generated by SMITH which is not recommended.
     * ``--with-include``  can be used to specify include paths.
     * ``--with-libxc`` turns on the interface to libxc.
     * ``CXXFLAGS=-DNDEBUG`` is absolutely important to specify "-DNDEBUG" for release builds.
     * Example (Release build on the Shiozaki group's cluster) ::

          ../configure 'LDFLAGS=-L/usr/local/boost/boost_1_59_0_gcc-5.2.0/lib' 
          'CXXFLAGS=-DNDEBUG -Wall -Wextra -Wno-type-limits -Wno-deprecated-declarations 
          -Wno-sign-compare -Wno-unused-function -Wno-unused-parameter -Werror -O3 -mavx' 
          '--enable-mkl' '--with-include=-I/usr/local/boost/boost_1_59_0_gcc-5.2.0/include
          -I/opt/intel/mkl-11.3/mkl/include' '--with-mpi=intel' '--enable-static' '--disable-shared' 
          'CC=/usr/local/gcc/gcc-5.2.0/bin/gcc' 'CXX=/usr/local/gcc/gcc-5.2.0/bin/g++'


* Compile

   1. make -j4
   #. make install
   #. test run: ``./BAGEL Your_PATH_to_BAGEL/test/benzene_svp_mp2.in``

