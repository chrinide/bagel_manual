.. _rasci:


*******
Restricted active space configuration interaction
*******

======
Description 
======

FCI is aims to describe the wavefunction as a linear combination of Slater determinants:

.. math::
  \Psi = \sum^{N}_{i}c_{i}\Phi_{N}

The basis into which the wavefunction is expanded is typically constructed by applying excitation operators to the determinant(s) included in the ground state wavefunction. The Restricted Active Space (RAS) method only onl allows certain excitations to be performed resulting in a smaller basis. In Bagel, the user specifies three "active" spaces; sets of orbitals between which excitations can occur.  This is useful close analysis of the impact of specific excitations on dynamic correlation effects, and also for investigating properties which depend on only a few specific excitations (e.g., x-ray adsorption spectra). The disadvantage is that the RASCI basis smaller than CI, and that the active spaces must be selected with caution.



==================
Pre-requisites
==================
A reference wavefunciton generated by some kind of Hartree-Fock, DFT, CASSCF, RASSCF, or CI-type calculation.

============
Keywords
============


.. topic:: ``active``

   | DESCRIPTION: Specifies the three active spaces used to generate the funcitons in the CI expansion.
   | DEFAULT: Three arrays of integers (see example).
   | DATATYPE: bool

.. topic:: ``algorithm``
   
   | DESCRIPTION: Algorithm to be used in the determinantion of the CI coeffcients.
   | DEFAULT: KH.
   | DATATYPE: string
   | VALUES: 
   |    ``KH, Knowles, Handy``: use Knowles-Handy.
   |    ``HZ, Harrison, Zarrabian``: use Harrison-Zarrabian.
   |    ``Dist, parallel``: use Parallel algorithm.
   | RECOMMENDATION: If the active space is large and you have multiple processors, use Dist. Otherwise, use default.

.. topic:: ``charge``

   | DESCRIPTION: The electronic charge of the system.
   | DEFAULT:  0
   | DATATYPE: integer
   | VALUES: `any int`
   | RECOMMENDATION: The electronic charge of the system. 


.. topic:: ``frozen``

   | DESCRIPTION: Sp.
   | DEFAULT: false.
   | DATATYPE: boolean
   | VALUES:
   |    ``TRUE``: Freeze orbitals..
   |    ``FALSE``: Do not freeze obitals.
   | RECOMMENDATION: Use default; no frozen orbitals. Freezing orbitals can reduce the cost, but also the accuracy of the calculation.

.. topic:: ``maxiter_fci``

   | DESCRIPTION: Maximum number of iterations in FCI algorithm 
   | DEFAULT: 
   | DATATYPE: integer
   | VALUES: ``and integer``
   | RECOMMENDATION: Becareful, a common mistake is to input the value s_z and not the number of electrons.

.. topic:: ``nspin``

   | DESCRIPTION: Number of unpaired electrons. 
   | DEFAULT: 0
   | DATATYPE: integer
   | VALUES: ``and integer``
   | RECOMMENDATION: Becareful, a common mistake is to input the value s_z and not the number of electrons.



.. topic:: ``nstates``

   | DESCRIPTION: Number of states to calculate. 
   | DEFAULT:``must be specified``
   | DATATYPE: integer
   | VALUES: ``any positive double``
   | RECOMMENDATION: User dependent, calculation of multiple states are slower.

.. topic:: ``restart``

   | DESCRIPTION: Restart the calcualtion from an earlier one. 
   | DEFAULT: false
   | DATATYPE: boolean
   | VALUES: ``true, false``
   | RECOMMENDATION: Use if possible.



.. topic:: ``thresh`` or ``thresh_fci``

   | DESCRIPTION: Threshold for convergence of selected CI algorithm 
   | DEFAULT: 1.0e-10 
   | DATATYPE: double
   | VALUES: ``any positive double``
   | RECOMMENDATION: Default, reduce for greater accuracy.



Example
=======
Possibly series of calculations for H2 with stretching bond. HF and CI . The HF energies will not describe the bond breaking correclty.

Sample input
------------

.. code-block:: javascript 

   { "bagel" : [

   {
     "title" : "molecule",
     "basis" : "sto-3g",
     "df_basis" : "svp-jkfit",
     "angstrom" : false,
     "geometry" : [
       { "atom" : "H",  "xyz" : [   -0.000000,     -0.000000,      0.9000]},
       { "atom" : "H",  "xyz" : [   -0.000000,     -0.000000,      0.0]}
     ]
   },

   {
     "title" : "hf",
     "thresh" : 1.0e-10
   },

   {
     "title" : "fci",
     "algorithm" : "parallel",
     "nstate" : 2
   }

   ]}


Some information about the output should also be included. This will not be entire output but enough for the reader to know their calculation worked.

.. figure:: figure/example.png
    :width: 200px
    :align: center
    :alt: alternate text
    :figclass: align-center

    This is an example of how to insert a figure. 

References
==========

+-----------------------------------------------+-----------------------------------------------------------------------+
|          Description of Reference             |                          Reference                                    | 
+===============================================+=======================================================================+
| Used for CI convergence algorithm.            | Knowles, N. C. Handy Chem. Phys. Lett.  J. Chem. Phys. 1984               |
+-----------------------------------------------+-----------------------------------------------------------------------+
| Used for CI convergence algorithm.            | John Doe and Jane Doe. J. Chem. Phys. 1980, 5, 120-124.               |
+-----------------------------------------------+-----------------------------------------------------------------------+

