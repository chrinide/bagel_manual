.. _start_guide:

************
Installation
************

-------------
Prerequisites
-------------

.. topic:: ``Required``

   | C++ compiler (support C++11 features)
   | MPI comipler (support MPI-3 standard)
   | `GNU Libtool <https://www.gnu.org/software/libtool/>`_
   | `GNU Autoconf <https://www.gnu.org/software/autoconf/autoconf.html>`_ (Version 2.69 or newer)
   | `GNU AutoMake <https://www.gnu.org/software/automake/>`_
   | `Boost C++ Libraries <http://www.boost.org/>`_ (Version 1.53.0 or newer)
   | `BLAS <http://www.netlib.org/blas/>`_ (Basic Linear Algebra Subprograms)
   | `LAPACK <http://www.netlib.org/lapack/>`_ (Linear Algebra Package)
   | `ScaLAPACK <http://www.netlib.org/scalapack/scalapack_home.html>`_ (Scalable LAPACK)

.. topic:: ``**Strongly Recommended** for BLAS, LAPACK & ScaLAPACK``

   | `Intel MKL <https://software.intel.com/en-us/intel-mkl>`_ (Intel Math Kernel Library)

-----------
Build BAGEL
-----------

 * Automake

   1. glibtoolize (in Linux, "libtoolize" instead)
   #. aclocal
   #. autoconf
   #. autoheader
   #. automake -a
 
 * Create an object directory & Configure
   
   1. mkdir obj
   #. cd obj
   #. ``../configure 'LDFLAGS=-L/opt/local/lib -lblas -llapack``
   
    Configure Options
     * ``--with-mpi``  turns on MPI (automatically detect mpicxx etc from PATH). Validated MPI implementation includes intel, mvapich. Openmpi is not recommended. 
     * ``--enable-mkl``  turns on MKL extensions, such as efficient matrix transposition. MKL libraries are automatically detected.
     * ``--disable-scalapack``  will disable use of ScaLapack (parallel Lapack) which is not recommended.
     * ``--with-include``  can be used to specify include paths.
     * ``--with-libxc`` turns on the interface to libxc.
     * ``--enable-smith``  turns on the code generated by SMITH (CASPT2 gradients, MRCI, etc).
     * ``CXXFLAGS=-DNDEBUG`` is recommended for release build to strip out assert statments
     * Example (Release build on the Shiozaki group's cluster)::

       ../configure 'LDFLAGS=-L/usr/local/boost/boost_1_59_0_gcc-5.2.0/lib' 'CXXFLAGS=-DNDEBUG -Wall -Wextra -Wno-type-limits -Wno-deprecated-declarations -Wno-sign-compare -Wno-unused-function -Wno-unused-parameter -Werror -O3 -mavx' '--enable-mkl' '--with-include=-I/usr/local/boost/boost_1_59_0_gcc-5.2.0/include -I/opt/intel/mkl-11.3/mkl/include' '--with-mpi=intel' '--enable-static' '--disable-shared' 'CC=/usr/local/gcc/gcc-5.2.0/bin/gcc' 'CXX=/usr/local/gcc/gcc-5.2.0/bin/g++' 

 * Compile

   1. make -j4
   #. mkae install
   #. test run: ``BAGEL Your_PATH_to_BAGEL/test/benzene_svp_mp2.in``

